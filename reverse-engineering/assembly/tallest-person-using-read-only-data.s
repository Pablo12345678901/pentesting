	# This file has to be assembled first, and then, the object produced has to be linked with the object file produced from 'using-assembler-rodata-section.s'.
	
	.globl _start
	.section .text
_start:
	# Load address of first record
	leaq people, %rbx

	# Get record count to loop on it.
	movq number_of_people, %rcx

	# Set default tallest value found to the minimum existing in the range 0-255.
	movq $0, %rdi

	# Exit if there is no record
	cmpq $0, %rcx
	je finish

main_loop:
	# Reminder : %rbx is the pointer to the struct.
	movq HEIGHT_OFFSET(%rbx), %rax

	# If it is less or equal than current maximum, get to next value - if any.
	cmpq %rdi, %rax
	jbe end_loop
	
	# Else adapt the current maximum.
	movq %rax, %rdi

end_loop:
	# Get the address of next person by adding the size of one person to the address of the struct.
	addq $PERSON_RECORD_SIZE, %rbx

	loopq main_loop
	
finish:
	# Exit syscall
	movq $60, %rax
	syscall
